"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={harvester:{name:"harvester",targetPopulation:4,behavior:function(e){(e.store.getFreeCapacity()>0||"mine"===e.memory.task)&&(e.memory.task="mine",function(e){if(0===e.store.getFreeCapacity())return e.memory.task="",!1;var r=e.room.find(FIND_SOURCES);return e.harvest(r[0])===ERR_NOT_IN_RANGE&&e.moveTo(r[0]),!0}(e))||((Game.spawns.Spawn1.store.getFreeCapacity()||"depositAtSpawn"===e.memory.task)&&(e.memory.task="depositAtSpawn",function(e){if(e.store.getFreeCapacity()===e.store.getCapacity())return e.memory.task="",!1;var r=Game.spawns.Spawn1;switch(e.transfer(r,RESOURCE_ENERGY)){case ERR_NOT_IN_RANGE:return e.moveTo(r),!0;case ERR_FULL:return!1;default:return!0}}(e))||(e.memory.task="depositAtSpawner",function(e){if(e.store.getFreeCapacity()===e.store.getCapacity())return e.memory.task="",!1;var r=Game.rooms.W8N3.controller;r&&e.transfer(r,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&e.moveTo(r)}(e)))},body:[WORK,CARRY,MOVE]}};exports.loop=function(){Game.time%10==0&&function(){console.log("Running census!");for(var r=Object.entries(Memory.creeps).reduce((function(e,r){var t=r[1];return t.role||(t.role="harvester"),e[t.role]||(e[t.role]=[]),e[t.role].push(t),e}),{}),t=Game.spawns.Spawn1,a=0,o=Object.values(e);a<o.length;a++){var n=o[a];if((!r[n.name]||r[n.name].length<n.targetPopulation)&&t.spawnCreep(n.body,""+n.name+Game.time.toString(),{dryRun:!0})===OK)return void t.spawnCreep(n.body,""+n.name+Game.time.toString(),{memory:{role:n.name,task:""}})}}();for(var r=0,t=Object.values(Game.creeps);r<t.length;r++){var a=t[r];if(!a.ticksToLive||a.ticksToLive<5)a.suicide(),delete Memory.creeps[a.name];else e[Memory.creeps[a.name].role].behavior(a)}};
